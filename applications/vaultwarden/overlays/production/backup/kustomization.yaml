apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - ../../base/common

  - backup-cronjob.yaml

  - healthchecks-external-secret.yaml

  - hetzner-storagebox-bx11-fsn1-sftp-restic-external-secret.yaml
  - ionos-cloud-objectstorage-eu-central-3-s3-restic-external-secret.yaml

configMapGenerator:
  - name: pgdump-config
    literals:
      - PGHOST=postgres.postgres-16.svc.cluster.local
      - PGPORT=5432
      - PGDATABASE=vaultwarden
      - PGTZ=Europe/Berlin

  - name: backup-sh-configmap
    files:
      - backup.sh=backup.sh
