apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
#  - ../../base/postgres
  - ../../base

  - ionos-cloud-objectstorage-eu-central-1-s3-restic-external-secret.yaml

configMapGenerator:
  - name: vaultwarden-config
    literals:
      - LOG_LEVEL=debug
    behavior: merge

#  - name: postgres-config
#    literals:
#      - POSTGRES_HOST=
#      - POSTGRES_DB=vaultwarden
#      - POSTGRES_PORT=5432

#secretGenerator:
#  - name: postgres-secret
#    literals:
#      - POSTGRES_USER=vaultwarden
#      - POSTGRES_PASSWORD=vaultwarden

patches:
#  - path: patch-postgres-deployment.yaml
  - path: patch-vaultwarden-deployment.yaml