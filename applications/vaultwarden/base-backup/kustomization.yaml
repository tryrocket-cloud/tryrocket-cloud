apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - backup-cronjob.yaml
  
#  - backup-role.yaml
#  - backup-rolebinding.yaml
#  - backup-sa-token.yaml
#  - backup-sa.yaml
  
  - hetzner-subaccount-ssh-config-external-secret.yaml
  
  - healthchecks-external-secret.yaml
  - restic-external-secret.yaml

configMapGenerator:
  - name: pgdump-config
    literals:
      - PGHOST=postgres.postgres-16.svc.cluster.local
      - PGPORT=5432
      - PGDATABASE=vaultwarden
      - PGTZ=Europe/Berlin

  - name: restic-config
    literals:
      - RESTIC_REPOSITORY=sftp:storagebox:/home/test-backup
